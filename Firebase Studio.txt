O firebase studio é um editor que usa nuvem para funcionar, é bom para quem tem pc fraco.

Essa é a minha configuração do dev.nix do firebase studio, copie e cole no seu dev.nix ou se quiser adaptar.

Antes de começar, veja se quer usar um workspace para um projeto ou para vários projetos, vou passar informações para essa configuração.

De graça é liberado 3 workspace, mas pode ter até 10 se você se cadastrar no site: developers.google.com/community/dev-program
E se inscreva com o mesmo email!!!
E faça logout no firebase studio e logue novamente.


Resumo da estrutura de pastas:
Um projeto:
/home/user/meu-projeto/
├── .idx/
│   └── dev.nix (Configuração global de Node/Ferramentas)
├── index.html
├── script.js
├── style.css
└── package.json (Fica na raiz)

Vários projetos:
/home/user/projetos/
├── .idx/
│   └── dev.nix (Configuração global de Node/Ferramentas)
├── estudo-javascript/
│   ├── package.json (dentro da pasta dos projeto)
│   └── index.js
├── meu-jogo-2d/
│   ├── package.json (dentro da pasta dos projeto)
│   └── game.js
└── site-portfolio/
    ├── package.json (dentro da pasta dos projeto)
    ├── index.html
    └── style.css

Dentro do projeto e abra o console na pasta raiz e digite:
npm init -y

Vai criar o package.json e nele modifique essa parte:
Procure a seção "scripts" e altere para que fique exatamente assim:
"scripts": {
  "dev": "nodemon index.js",
  "test": "echo \"Error: no test specified\" && exit 1"
},

É só substituir.

Para um workspace um projeto:
Encontre esse trecho:
previews = {
      enable = true;
      previews = {
        web = {
          command = ["npm" "run" "dev"]; 
          manager = "web";
          env = { PORT = "$PORT"; };
        };
      };
    };

Para um workspace para vários projetos:
Encontre esse trecho:
previews = {
  enable = true;
  previews = {
    # Deixe o comando vazio ou comentado para evitar o erro de ENOENT
  };
};

========== copie isso e cole no dev.nix ==========

# To learn more about how to use Nix to configure your environment
# see: https://developers.google.com/idx/guides/customize-idx-env
{ pkgs, ... }: {
  # Which nixpkgs channel to use.
  channel = "stable-24.05"; # or "unstable"
  # Use https://search.nixos.org/packages to find packages
  packages = [
    # pkgs.go
    # pkgs.python311
    # pkgs.python311Packages.pip
    pkgs.nodejs_22
    pkgs.nodePackages.nodemon
  ];
  # Sets environment variables in the workspace
  env = {};
  idx = {
    # Search for the extensions you want on https://open-vsx.org/ and use "publisher.id"
    extensions = [
      # "vscodevim.vim"
      "google.gemini-cli-vscode-ide-companion"
    ];
    # Enable previews
    previews = {
      enable = true;
      previews = {
        web = {
        #   # Example: run "npm run dev" with PORT set to IDX's defined port for previews,
        #   # and show it in IDX's web preview panel
          command = ["npm" "run" "dev"];
          manager = "web";
          env = {
        #     # Environment variables to set for your server
            PORT = "$PORT";
          };
        };
      };
    };
    # Workspace lifecycle hooks
    workspace = {
      # Runs when a workspace is first created
      onCreate = {
        # Example: install JS dependencies from NPM
        npm-install = "npm install";
        # Open editors for the following files by default, if they exist:
        default.openFiles = [ ".idx/dev.nix" "README.md" ];
      };
      # Runs when the workspace is (re)started
      onStart = {
        # Example: start a background task to watch and re-build backend code
        # watch-backend = "npm run watch-backend";
      };
    };
  };
}
